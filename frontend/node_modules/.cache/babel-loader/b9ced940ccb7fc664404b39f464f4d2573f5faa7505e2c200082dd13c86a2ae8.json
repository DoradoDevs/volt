{"ast":null,"code":"import React,{useEffect,useMemo,useState}from'react';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WalletRow=_ref=>{let{w,canRemove,onRemove}=_ref;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',border:'1px solid #7B68EE',borderRadius:8,padding:'8px 12px',marginBottom:8,background:'rgba(255,255,255,0.04)'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontFamily:'monospace',fontSize:13},children:w.address}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,opacity:0.8},children:[w.balanceSOL,\" SOL \",w.type==='source'?'(deposit)':'(sub)']})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigator.clipboard.writeText(w.address),children:\"Copy\"}),canRemove&&/*#__PURE__*/_jsx(\"button\",{title:\"Remove this wallet\",onClick:()=>onRemove(w.address),style:{background:'#b34d6e',color:'#fff'},children:\"Remove\"})]})]});};const WalletManager=_ref2=>{let{numWallets,refreshToken,onChanged}=_ref2;const[list,setList]=useState([]);const[loading,setLoading]=useState(true);const[confirmText,setConfirmText]=useState('');const[error,setError]=useState('');const refresh=async()=>{setLoading(true);setError('');try{const res=await api.get('/wallets/list');setList(res.data.wallets||[]);}catch(e){var _e$response,_e$response$data;console.error('Failed to load wallets',e);setError(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||'Failed to fetch wallets');}finally{setLoading(false);}};useEffect(()=>{refresh();},[refreshToken]);const totalSubWallets=useMemo(()=>list.filter(w=>w.type==='sub').length,[list]);const displayCount=numWallets!==null&&numWallets!==void 0?numWallets:totalSubWallets;const addOne=async()=>{try{await api.post('/wallets/add-one',{});await refresh();onChanged===null||onChanged===void 0?void 0:onChanged();}catch(e){var _e$response2,_e$response2$data;setError(((_e$response2=e.response)===null||_e$response2===void 0?void 0:(_e$response2$data=_e$response2.data)===null||_e$response2$data===void 0?void 0:_e$response2$data.error)||'Error adding wallet');}};const removeOne=async address=>{if(confirmText!=='confirm'){setError('Type \"confirm\" to enable removal');return;}try{await api.post('/wallets/remove-one',{address,confirm:'confirm'});setConfirmText('');await refresh();onChanged===null||onChanged===void 0?void 0:onChanged();}catch(e){var _e$response3,_e$response3$data;setError(((_e$response3=e.response)===null||_e$response3===void 0?void 0:(_e$response3$data=_e$response3.data)===null||_e$response3$data===void 0?void 0:_e$response3$data.error)||'Error removing wallet');}};return/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #7B68EE',borderRadius:10,padding:16},children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:0},children:\"Wallet Management\"}),/*#__PURE__*/_jsxs(\"p\",{style:{marginBottom:12},children:[\"Total Sub-Wallets: \",displayCount]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:10,alignItems:'center',flexWrap:'wrap',marginBottom:12},children:[/*#__PURE__*/_jsx(\"button\",{title:\"Add wallet\",onClick:addOne,style:{fontWeight:700},children:\"+ Add one\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:confirmText,onChange:e=>setConfirmText(e.target.value),placeholder:\"type \\\"confirm\\\" to enable delete\",style:{width:220}})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'salmon',fontSize:13,marginBottom:12},children:error}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:\"Generated Wallets\"}),loading?/*#__PURE__*/_jsx(\"em\",{children:\"Loading\\uFFFD\"}):list.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No wallets yet.\"}):list.map(w=>/*#__PURE__*/_jsx(WalletRow,{w:w,canRemove:w.type==='sub',onRemove:removeOne},w.address))]})]});};export default WalletManager;","map":{"version":3,"names":["React","useEffect","useMemo","useState","api","jsx","_jsx","jsxs","_jsxs","WalletRow","_ref","w","canRemove","onRemove","style","display","alignItems","justifyContent","border","borderRadius","padding","marginBottom","background","children","fontFamily","fontSize","address","opacity","balanceSOL","type","gap","onClick","navigator","clipboard","writeText","title","color","WalletManager","_ref2","numWallets","refreshToken","onChanged","list","setList","loading","setLoading","confirmText","setConfirmText","error","setError","refresh","res","get","data","wallets","e","_e$response","_e$response$data","console","response","totalSubWallets","filter","length","displayCount","addOne","post","_e$response2","_e$response2$data","removeOne","confirm","_e$response3","_e$response3$data","marginTop","flexWrap","fontWeight","value","onChange","target","placeholder","width","map"],"sources":["C:/Users/Clock/OneDrive/Desktop/volt/volt/frontend/src/components/WalletManager.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport api from '../services/api';\n\nconst WalletRow = ({ w, canRemove, onRemove }) => (\n  <div\n    style={{\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      border: '1px solid #7B68EE',\n      borderRadius: 8,\n      padding: '8px 12px',\n      marginBottom: 8,\n      background: 'rgba(255,255,255,0.04)'\n    }}\n  >\n    <div>\n      <div style={{ fontFamily: 'monospace', fontSize: 13 }}>{w.address}</div>\n      <div style={{ fontSize: 12, opacity: 0.8 }}>\n        {w.balanceSOL} SOL {w.type === 'source' ? '(deposit)' : '(sub)'}\n      </div>\n    </div>\n    <div style={{ display: 'flex', gap: 8 }}>\n      <button onClick={() => navigator.clipboard.writeText(w.address)}>Copy</button>\n      {canRemove && (\n        <button\n          title=\"Remove this wallet\"\n          onClick={() => onRemove(w.address)}\n          style={{ background: '#b34d6e', color: '#fff' }}\n        >\n          Remove\n        </button>\n      )}\n    </div>\n  </div>\n);\n\nconst WalletManager = ({ numWallets, refreshToken, onChanged }) => {\n  const [list, setList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [confirmText, setConfirmText] = useState('');\n  const [error, setError] = useState('');\n\n  const refresh = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const res = await api.get('/wallets/list');\n      setList(res.data.wallets || []);\n    } catch (e) {\n      console.error('Failed to load wallets', e);\n      setError(e.response?.data?.error || 'Failed to fetch wallets');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    refresh();\n  }, [refreshToken]);\n\n  const totalSubWallets = useMemo(() => list.filter((w) => w.type === 'sub').length, [list]);\n  const displayCount = numWallets ?? totalSubWallets;\n\n  const addOne = async () => {\n    try {\n      await api.post('/wallets/add-one', {});\n      await refresh();\n      onChanged?.();\n    } catch (e) {\n      setError(e.response?.data?.error || 'Error adding wallet');\n    }\n  };\n\n  const removeOne = async (address) => {\n    if (confirmText !== 'confirm') {\n      setError('Type \"confirm\" to enable removal');\n      return;\n    }\n    try {\n      await api.post('/wallets/remove-one', { address, confirm: 'confirm' });\n      setConfirmText('');\n      await refresh();\n      onChanged?.();\n    } catch (e) {\n      setError(e.response?.data?.error || 'Error removing wallet');\n    }\n  };\n\n  return (\n    <div style={{ border: '1px solid #7B68EE', borderRadius: 10, padding: 16 }}>\n      <h2 style={{ marginTop: 0 }}>Wallet Management</h2>\n      <p style={{ marginBottom: 12 }}>Total Sub-Wallets: {displayCount}</p>\n\n      <div style={{ display: 'flex', gap: 10, alignItems: 'center', flexWrap: 'wrap', marginBottom: 12 }}>\n        <button title=\"Add wallet\" onClick={addOne} style={{ fontWeight: 700 }}>+ Add one</button>\n        <input\n          type=\"text\"\n          value={confirmText}\n          onChange={(e) => setConfirmText(e.target.value)}\n          placeholder='type \"confirm\" to enable delete'\n          style={{ width: 220 }}\n        />\n      </div>\n\n      {error && (\n        <div style={{ color: 'salmon', fontSize: 13, marginBottom: 12 }}>{error}</div>\n      )}\n\n      <div>\n        <h3 style={{ marginTop: 0 }}>Generated Wallets</h3>\n        {loading ? (\n          <em>Loadingï¿½</em>\n        ) : list.length === 0 ? (\n          <p>No wallets yet.</p>\n        ) : (\n          list.map((w) => (\n            <WalletRow\n              key={w.address}\n              w={w}\n              canRemove={w.type === 'sub'}\n              onRemove={removeOne}\n            />\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default WalletManager;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}